---
status: 🧭准备
start: 2025-05-25
due: 2025-05-25
topic:
  - 算法
  - 代码随想录
tags:
  - project/代码随想录算法营
  - 计算机/算法
  - 知识点
recommend: 1
priority: 1
authors:
  - Donghan
share: "false"
---
## 题目
[406.根据身高重建队列 | 力扣题目](https://leetcode.cn/problems/queue-reconstruction-by-height/description/)

`people[i] = [hi, ki]` 表示第 `i` 个人的身高为 `hi`, 前面 **正好** 有 `ki` 个身高大于或等于 `hi` 的人.

**示例**:
>**输入**: people = `[[7,0],[4,4],[7,1],[5,0],[6,1],[5,2]]`
>**输出**: `[[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]]`
>**解释**:
>	编号为 0 的人身高为 5, 没有身高更高或者相同的人排在他前面
>	编号为 1 的人身高为 7, 没有身高更高或者相同的人排在他前面
>	编号为 2 的人身高为 5, 有 2 个身高更高或者相同的人排在他前面, 即编号为 0 和 1 的人
>	编号为 3 的人身高为 6, 有 1 个身高更高或者相同的人排在他前面, 即编号为 1 的人
>	编号为 4 的人身高为 4, 有 4 个身高更高或者相同的人排在他前面, 即编号为 0、1、2、3 的人
>	编号为 5 的人身高为 7, 有 1 个身高更高或者相同的人排在他前面, 即编号为 1 的人
>	因此 `[[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]]` 是重新构造后的队列

## 初步解答
先按照身高排序, 从小到大, 相同则按照 k 降序排列. 再从后往前, 根据 k 向后移动排序.
```python
class Solution:
    def reconstructQueue(self, people: List[List[int]]) -> List[List[int]]:
        # 按照身高 h 升序排列, 若相同则按照 k 降序排列
        people = sorted(people, key=lambda x: (x[0], -x[1]))

        ind = len(people) - 2 # 倒数第二个开始
        while ind >= 0:
            k = people[ind][1]
            for i in range(ind, ind+k): # 向后移动
                people[i],people[i+1] = people[i+1],people[i]
            ind -= 1
        return people
```

## 参考解答
本题和 [[08-贪心算法-分发糖果]]一样是**有两个方向/维度要考虑**. 所以一定要先处理一个方向, 再处理另一个.

根据题意, k 表明**前面有 k 个高的**, 所以按照身高排序时应该**从大到小**排序, 若相同则按照 k **升序**排列. 🚨 h 降序, k 顺序, 这个顺序不能搞错了, 因为之后要做插入. 可以对照下图想想看 k 降序会怎样?

![[greedy_queue.png|500]]
```python
class Solution:
    def reconstructQueue(self, people: List[List[int]]) -> List[List[int]]:
    	# ✅先按照h维度的身高顺序从高到低排序。确定第一个维度
        # lambda返回的是一个元组：当-x[0](维度h）相同时，再根据x[1]（维度k）从小到大排序
        people.sort(key=lambda x: (-x[0], x[1]))
        que = []
	
	# 根据每个元素的第二个维度k，贪心算法，进行插入
        # people已经排序过了：同一高度时k值小的排前面。
        for p in people:
            que.insert(p[1], p)
        return que
```

## 心得
✅Python `sorted/sort` 使用小技巧: 比较元组/序列时, 若前面的元素相同, 则会继续比较下一位.

对于 Python list 插入的效率, 回看 [[01-数组]].

---
## links


## reference

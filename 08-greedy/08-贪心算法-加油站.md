---
status: 🧭准备
start: 2025-05-25
due: 2025-05-25
topic:
  - 算法
  - 代码随想录
tags:
  - project/代码随想录算法营
  - 计算机/算法
  - 知识点
recommend: 2
priority: 1
authors:
  - Donghan
share: "false"
---
## 题目
[134.加油站 | 力扣题目](https://leetcode.cn/problems/gas-station/description/)

在一条环路上有 `n` 个加油站, 其中第 `i` 个加油站有汽油 `gas[i]` 升.

你有一辆油箱容量无限的的汽车，从第 `i` 个加油站开往第 `i+1` 个加油站需要消耗汽油 `cost[i]` 升. 你从其中的一个加油站出发, 开始时油箱为空.

给定两个整数数组 `gas` 和 `cost`, 如果你可以按顺序绕环路行驶一周, 则返回出发时加油站的编号, 否则返回 `-1`. 如果存在解，则题目**保证**它是**唯一**的.

## 初步解答
总感觉受到了 [[08-贪心算法-买卖股票最佳时机II]] 和 [[08-贪心算法-最大子序和]] 的一点启发, 应该从**差值**入手, 在本题里即剩余油量.
```python
class Solution:
    def canCompleteCircuit(self, gas: List[int], cost: List[int]) -> int:
        diff = [g-c for g,c in zip(gas,cost)] # 计算每站过后剩余油量
        if sum(diff) < 0: return -1 # 走一圈剩余为负
        
        # 出发加油站的条件是从该站往后剩余油量始终为正
        _sum = 0
        ind = 0
        for i,d in enumerate(diff):
            _sum += d
            if _sum < 0:
                _sum = 0
                ind = i+1
        return ind
```

## 参考解答
"代码随想录"里给出了三种参考: 暴力, 贪心1 和 贪心2. **暴力法就是模拟, 比较考验代码功夫** (用 for 循环对 `gas` 从头遍历, **用 while 循环来模拟回环**).

贪心2 和自己写的是一致的, 一处改进是只用一次 for 循环完成.
```python
class Solution:
    def canCompleteCircuit(self, gas: List[int], cost: List[int]) -> int:
        curSum = 0  # 当前累计的剩余油量
        totalSum = 0  # 总剩余油量
        start = 0  # 起始位置
        
        for i in range(len(gas)):
            curSum += gas[i] - cost[i]
            totalSum += gas[i] - cost[i]
            
            if curSum < 0:  # 当前累计剩余油量curSum小于0
                start = i + 1  # 起始位置更新为i+1
                curSum = 0  # curSum重新从0开始累计
        
        if totalSum < 0:
            return -1  # 总剩余油量totalSum小于0，说明无法环绕一圈
        return start
```


## 心得

---
## links


## reference
- [加油站题解 | 代码随想录](https://programmercarl.com/0134.%E5%8A%A0%E6%B2%B9%E7%AB%99.html#%E7%AE%97%E6%B3%95%E5%85%AC%E5%BC%80%E8%AF%BE)
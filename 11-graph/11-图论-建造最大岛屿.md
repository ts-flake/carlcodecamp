---
status: âœ…å®Œæˆ
start: 2025-06-18
due: 2025-06-18
topic:
  - ç®—æ³•
  - ä»£ç éšæƒ³å½•
tags:
  - project/ä»£ç éšæƒ³å½•ç®—æ³•è¥
  - è®¡ç®—æœº/ç®—æ³•
recommend: 1
priority: 1
authors:
  - Donghan
dg-publish: false
---
## é¢˜ç›®
[104.å»ºé€ æœ€å¤§å²›å±¿ | å¡ç é¢˜ç›®](https://kamacoder.com/problempage.php?pid=1176)

ç»™å®šä¸€ä¸ªç”±Â `1` (é™†åœ°) å’Œ `0` (æ°´) ç»„æˆçš„çŸ©é˜µ, ä½ **æœ€å¤šå¯ä»¥å°†çŸ©é˜µä¸­çš„ä¸€æ ¼æ°´å˜ä¸ºä¸€å—é™†åœ°**, åœ¨æ‰§è¡Œäº†æ­¤æ“ä½œä¹‹å, çŸ©é˜µä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯æ˜¯å¤šå°‘.

å²›å±¿é¢ç§¯çš„è®¡ç®—æ–¹å¼ä¸ºç»„æˆå²›å±¿çš„é™†åœ°çš„æ€»æ•°. å²›å±¿æ˜¯è¢«æ°´åŒ…å›´, å¹¶ä¸”é€šè¿‡æ°´å¹³æ–¹å‘æˆ–å‚ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥è€Œæˆçš„. ä½ å¯ä»¥å‡è®¾çŸ©é˜µå¤–å‡è¢«æ°´åŒ…å›´.
## åˆæ­¥è§£ç­”
æœ¬é¢˜å¯ä»¥åœ¨ [[11-å›¾è®º-å²›å±¿çš„æœ€å¤§é¢ç§¯]]ä¸Šç¨åŠ æ”¹è¿›. å¤§è‡´æ€è·¯æ˜¯éå†æ°´é¢å•å…ƒæ ¼, å‡è®¾å°†è¯¥æ°´é¢å˜æˆé™†åœ°, è®¡ç®—å²›å±¿çš„é¢ç§¯. ä¸æ–­æ›´æ–°æœ€å¤§é¢ç§¯.

ğŸš¨ä¸‹é¢çš„ä»£ç ä¼šè¶…æ—¶, å…¶ä¸­ `deepcopy(graph)` æ¯”è¾ƒè€—æ—¶, è€Œä¸”å¤–å±‚ä¸¤ä¸ª for å¾ªç¯ O(nm) + å†…éƒ¨è®¡ç®—å²›å±¿é¢ç§¯æœ€åæ˜¯ O(nm), æ•´ä½“æœ‰ O((nm)^2).
```python
from copy import deepcopy

def dfs(i, j, graph):
	# æ˜¯é™†åœ°, æ ‡è®°ä¸ºåˆ°è®¿è¿‡
    if graph[i][j] == 1:
        global count
        count += 1 # å²›å±¿é¢ç§¯åŠ ä¸€
        graph[i][j] = -1
    # å…¶ä»–æƒ…å†µ: æ ‡è®°è¿‡, ä¸æ˜¯é™†åœ°
    else:
        return
    # DFS æœç´¢ä¸Šå³ä¸‹å·¦æ–¹å‘çš„é™†åœ°
    for di,dj in [[-1,0],[0,1],[1,0],[0,-1]]:
        _i,_j = i+di,j+dj
        if _i < 0 or _i >= n or _j < 0 or _j >= m:
            continue
        # é€’å½’
        dfs(_i, _j, graph)
    

if __name__ == '__main__':
	# è¯»å–è¾“å…¥
	# åˆ›å»ºåœ°å›¾
    n,m = map(int, input().split())
    graph = []
    for _ in range(n):
        graph.append(list(map(int, input().split())))

	# é‡åˆ°ä¸€ä¸ªé™†åœ°å°±è®°å½•ä¸€æ¬¡, ç„¶åä½¿ç”¨ DFS æ¥æ ‡è®°ç›¸é‚» (ä¸Šä¸‹å·¦å³) çš„é™†åœ°
    max_count = 0
    for i in range(n):
        for j in range(m):
            if graph[i][j] == 0:
                _graph = deepcopy(graph)
                _graph[i][j] = 1 # æ°´é¢å˜é™†åœ°
                count = 0 # åˆå§‹åŒ–å²›å±¿é¢ç§¯
                dfs(i, j, _graph)
                max_count = max(max_count, count) # è®°å½•æœ€å¤§å²›å±¿é¢ç§¯
    
    if max_count == 0: # æ— æ°´çš„æƒ…å†µ
        count = 0
        dfs(0, 0, graph)
        max_count = count
    print(max_count)
```

## å‚è€ƒè§£ç­”
ä¼˜åŒ–ä¸€ä¸‹, æš´åŠ›æ–¹æ³•åœ¨è®¡ç®—å²›å±¿é¢ç§¯æ—¶æœ‰å¾ˆå¤šé‡å¤çš„éƒ¨åˆ†. æˆ‘ä»¬å¯ä»¥æŠŠä¸­é—´å€¼è®°å½•ä¸‹æ¥.
![[graph_build_island.png|500]]

```python
import collections

directions = [[-1, 0], [0, 1], [0, -1], [1, 0]]
area = 0

def dfs(i, j, grid, visited, num):
    global area
    
    if visited[i][j]:
        return

    visited[i][j] = True
    grid[i][j] = num  # æ ‡è®°å²›å±¿å·ç 
    area += 1
    
    for x, y in directions:
        new_x = i + x
        new_y = j + y
        if (
            0 <= new_x < len(grid)
            and 0 <= new_y < len(grid[0])
            and grid[new_x][new_y] == "1"
        ):
            dfs(new_x, new_y, grid, visited, num)
    

def main():
    global area
    
    N, M = map(int, input().strip().split())
    grid = []
    for i in range(N):
        grid.append(input().strip().split())
    visited = [[False] * M for _ in range(N)]
    rec = collections.defaultdict(int)
    
    cnt = 2
    for i in range(N):
        for j in range(M):
            if grid[i][j] == "1":
                area = 0
                dfs(i, j, grid, visited, cnt)
                rec[cnt] = area  # è®°å½•å²›å±¿é¢ç§¯, ç¼–å·ä» 2 å¼€å§‹
                cnt += 1
    
    res = 0
    for i in range(N):
        for j in range(M):
            if grid[i][j] == "0":
                max_island = 1  # å°†æ°´å˜ä¸ºé™†åœ°ï¼Œæ•…ä»1å¼€å§‹è®¡æ•°
                v = set()
                for x, y in directions:
                    new_x = i + x
                    new_y = j + y
                    if (
                        0 <= new_x < len(grid)
                        and 0 <= new_y < len(grid[0])
                        and grid[new_x][new_y] != "0"
                        and grid[new_x][new_y] not in v  # å²›å±¿ä¸å¯é‡å¤
                    ):
                        max_island += rec[grid[new_x][new_y]]
                        v.add(grid[new_x][new_y])
                res = max(res, max_island)

    if res == 0:
        return max(rec.values())  # æ— æ°´çš„æƒ…å†µ
    return res
    
if __name__ == "__main__":
    print(main())
```



## å¿ƒå¾—

---
## links


## reference

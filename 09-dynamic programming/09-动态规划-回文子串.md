---
status: âœ…å®Œæˆ
start: 2025-06-30
due: 2025-06-30
topic:
  - ç®—æ³•
  - ä»£ç éšæƒ³å½•
tags:
  - project/ä»£ç éšæƒ³å½•ç®—æ³•è¥
  - è®¡ç®—æœº/ç®—æ³•
recommend: 1
priority: 1
authors:
  - Donghan
dg-publish: false
---
## é¢˜ç›®
[647.å›æ–‡å­ä¸² | åŠ›æ‰£é¢˜ç›®](https://leetcode.cn/problems/palindromic-substrings/)

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²Â `s`, è¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ä¸­Â **å›æ–‡å­ä¸²**Â çš„æ•°ç›®.

**å›æ–‡å­—ç¬¦ä¸²**æ˜¯æ­£ç€è¯»å’Œå€’è¿‡æ¥è¯»ä¸€æ ·çš„å­—ç¬¦ä¸².

**å­å­—ç¬¦ä¸²**æ˜¯å­—ç¬¦ä¸²ä¸­çš„ç”±**è¿ç»­å­—ç¬¦** (æ²¡æœ‰åˆ é™¤æ“ä½œ) ç»„æˆçš„ä¸€ä¸ªåºåˆ—.

## åˆæ­¥è§£ç­”
æœ¬é¢˜çš„å­å­—ç¬¦ä¸²æ˜¯**è¿ç»­çš„**, æ‰€ä»¥**æš´åŠ›æ³•**å¾ˆå®¹æ˜“å†™, ğŸš¨æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^3), ä¸¤å±‚ for + `is_palindrome` åˆæ˜¯ä¸€ä¸ª for.
```python
class Solution:
    def countSubstrings(self, s: str) -> int:
        def is_palindrome(x):
            return x == x[::-1]

        count = 0
        for i in range(len(s)):
            for j in range(i+1, len(s)+1):
                if is_palindrome(s[i:j]):
                    count += 1
        return count
```


## å‚è€ƒè§£ç­”
![[dp_palindrome.png|300]]
âœ…**åŠ¨æ€è§„åˆ’**:
- æœ¬é¢˜çš„ dp æœ‰ç‚¹éš¾æƒ³åˆ°, æ˜¯ä¸ªäºŒç»´è¡¨, `dp[i][j]` è¡¨ç¤º `s[i] to s[j]` æ˜¯å¦æ˜¯å›æ–‡ (boolen)
- é€’æ¨å…¬å¼: `dp[i][j]=True` çš„æ¡ä»¶æ˜¯ `s[i]==s[j]` ä¸” `dp[i+1][j-1]=True`

æ—¶é—´/ç©ºé—´å¤æ‚åº¦æ˜¯ O(n^2).
```python
class Solution:
    def countSubstrings(self, s: str) -> int:
        dp = [[False] * len(s) for _ in range(len(s))]
        result = 0
        for i in range(len(s)-1, -1, -1): # ğŸš¨æ³¨æ„éå†é¡ºåº, ä»ä¸‹åˆ°ä¸Š
            for j in range(i, len(s)):    # ä»å·¦åˆ°å³
                if s[i] == s[j]:
                    if j - i <= 1: #æƒ…å†µä¸€&æƒ…å†µäºŒ: å•å­—ç¬¦æˆ–ä¸¤ä¸ªå­—ç¬¦
                        result += 1
                        dp[i][j] = True
                    elif dp[i+1][j-1]: #æƒ…å†µä¸‰: ä¸‰ä¸ªä»¥ä¸Šå­—ç¬¦
                        result += 1
                        dp[i][j] = True
        return result
```


âœ…**åŒæŒ‡é’ˆ**æ³•:
- åŒæŒ‡é’ˆåˆ¤æ–­å›æ–‡, å·¦å³ä¸¤å­—ç¬¦åˆ¤æ–­æ˜¯å¦ç›¸ç­‰
- å›æ–‡é•¿åº¦è¦ä¹ˆæ˜¯å¥‡æ•°, è¦ä¹ˆå¶æ•°
- æ—¶é—´å¤æ‚åº¦ O(n^2), ç©ºé—´å¤æ‚åº¦ O(1)

```python
class Solution:
    def countSubstrings(self, s: str) -> int:
        result = 0
        for i in range(len(s)):
	        #ä»¥iä¸ºä¸­å¿ƒ, é•¿åº¦ä¸º 1,3,... çš„å›æ–‡
            result += self.extend(s, i, i, len(s))
            #ä»¥iå’Œi+1ä¸ºä¸­å¿ƒ, é•¿åº¦ä¸º 2,4,... çš„å›æ–‡
            result += self.extend(s, i, i+1, len(s))
        return result
    
    def extend(self, s, i, j, n):
        res = 0
        while i >= 0 and j < n and s[i] == s[j]:
            i -= 1
            j += 1
            res += 1
        return res
```
## å¿ƒå¾—

---
## links


## reference
